{"version":3,"sources":["components/detailpanel/index.jsx","views/App.jsx","index.jsx"],"names":["Item","Form","formItemLayout","layout","Panel","formRef","React","createRef","handleSubmit","e","preventDefault","current","validateFields","then","values","props","type","nodes","edges","executeCommand","item","id","get","updateModel","catch","errorInfo","Error","renderNodeDetail","setTimeout","label","getModel","setFieldsValue","ref","name","onBlur","value","renderEdgeDetail","renderMultiDetail","renderCanvasDetail","this","title","bordered","Component","NodePanel","DetailPanel","create","withEditorContext","EdgePanel","MultiPanel","CanvasPanel","EditorCommand","constants","data","x","y","source","target","App","editorRef","state","console","log","graph","on","GraphNodeEvent","onNodeClick","graphEvent","className","span","Undo","Redo","Remove","ZoomOut","ZoomIn","flex","model","size","alt","src","width","height","draggable","style","position","graphConfig","defaultNode","defaultEdge","renderContent","hide","left","top","mode","selectable","onClick","PasteHere","Copy","ReactDOM","render","StrictMode","locale","zhCN","document","getElementById"],"mappings":"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","file":"static/js/main.cb34dc00.chunk.js","sourcesContent":["/* eslint-disable no-invalid-this */\r\n\r\nimport React from 'react';\r\nimport { Card, Form, Input } from 'antd';\r\nimport { DetailPanel, withEditorContext } from 'gg-editor';\r\n\r\nconst { Item } = Form;\r\nconst formItemLayout = {\r\n  layout: 'vertical'\r\n};\r\n\r\nclass Panel extends React.Component {\r\n  formRef = React.createRef();\r\n  handleSubmit = (e) => {\r\n    if (e && e.preventDefault) {\r\n      e.preventDefault();\r\n    }\r\n    // 表单验证\r\n    this.formRef.current\r\n      .validateFields()\r\n      .then((values) => {\r\n        const { type, nodes, edges, executeCommand } = this.props;\r\n        const item = type === 'node' ? nodes[0] : edges[0];\r\n        if (!item) {\r\n          return;\r\n        }\r\n        executeCommand('update', {\r\n          id: item.get('id'),\r\n          updateModel: {\r\n            ...values\r\n          }\r\n        });\r\n      })\r\n      .catch((errorInfo) => {\r\n        throw new Error(errorInfo);\r\n      });\r\n  };\r\n\r\n  // 渲染节点详情\r\n  renderNodeDetail = () => {\r\n    setTimeout(() => {\r\n      const { label } = this.props.nodes[0].getModel();\r\n      this.formRef.current.setFieldsValue({\r\n        label\r\n      });\r\n    });\r\n    return (\r\n      <Form ref={this.formRef} {...formItemLayout}>\r\n        <Form.Item label=\"Label\" name=\"label\">\r\n          <Input onBlur={this.handleSubmit} value=\"dwadwad\" />\r\n        </Form.Item>\r\n      </Form>\r\n    );\r\n  };\r\n\r\n  // 渲染边详情\r\n  renderEdgeDetail = () => {\r\n    setTimeout(() => {\r\n      const { label } = this.props.edges[0].getModel();\r\n      this.formRef.current.setFieldsValue({\r\n        label\r\n      });\r\n    });\r\n    return (\r\n      <Form ref={this.formRef} {...formItemLayout}>\r\n        <Item label=\"Label\" name=\"label\">\r\n          <Input onBlur={this.handleSubmit} />\r\n        </Item>\r\n      </Form>\r\n    );\r\n  };\r\n\r\n  // 渲染多选详情\r\n  renderMultiDetail = () => {\r\n    return null;\r\n  };\r\n\r\n  // 渲染画布详情\r\n  renderCanvasDetail = () => {\r\n    return <p>Select a node or edge 🤣</p>;\r\n  };\r\n\r\n  render() {\r\n    const { type } = this.props;\r\n    return (\r\n      <Card title={type} bordered={false}>\r\n        {type === 'node' && this.renderNodeDetail()}\r\n        {type === 'edge' && this.renderEdgeDetail()}\r\n        {type === 'multi' && this.renderMultiDetail()}\r\n        {type === 'canvas' && this.renderCanvasDetail()}\r\n      </Card>\r\n    );\r\n  }\r\n}\r\n\r\n// 分别是：节点详情面板、边详情面板、多选详情面板、画布详情面板\r\nexport const NodePanel = DetailPanel.create('node')(withEditorContext(Panel));\r\nexport const EdgePanel = DetailPanel.create('edge')(withEditorContext(Panel));\r\nexport const MultiPanel = DetailPanel.create('multi')(withEditorContext(Panel));\r\nexport const CanvasPanel = DetailPanel.create('canvas')(withEditorContext(Panel));\r\n","import React, { Component } from 'react';\nimport { Col, Menu, Row, Tooltip } from 'antd';\nimport 'antd/dist/antd.css';\nimport './App.scss';\nimport 'font-awesome/css/font-awesome.min.css';\nimport { CanvasPanel, EdgePanel, MultiPanel, NodePanel } from '../components/detailpanel';\n/**\n * GGEditor       编辑器主控\n * Flow           流程图\n */\nimport GGEditor, { Command, constants, ContextMenu, EditableLabel, Flow, Item, ItemPanel } from 'gg-editor';\n\nconst { EditorCommand } = constants;\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: 'Node',\n      x: 55,\n      y: 55\n    },\n    {\n      id: '1',\n      label: 'Node',\n      x: 55,\n      y: 255\n    }\n  ],\n  edges: [\n    {\n      label: 'Label',\n      source: '0',\n      target: '1'\n    }\n  ]\n};\n\nclass App extends Component {\n\n\n  constructor() {\n    super();\n    this.state = {\n      data: data\n    };\n  }\n\n  componentDidMount() {\n    console.log(this.editorRef);\n    setTimeout(() => {\n      this.editorRef.current.state.graph.on(constants.GraphNodeEvent.onNodeClick, (graphEvent) => {\n        console.log(graphEvent.item.getModel());\n      });\n    }, 0);\n  }\n\n  editorRef = React.createRef();\n\n  render() {\n    return (\n      <div className=\"app\">\n        <header>ggeditor</header>\n        <GGEditor ref={this.editorRef} className=\"editor\">\n          {/* 工具栏 */}\n          <Row>\n            <Col span={24}>\n              <div className=\"toolbar\">\n                <Command name={EditorCommand.Undo}>\n                  <Tooltip title=\"撤销\">\n                    <i className=\"fa fa-undo\" />\n                  </Tooltip>\n                </Command>\n                <Command name={EditorCommand.Redo}>\n                  <Tooltip title=\"重做\">\n                    <i className=\"fa fa-repeat\" />\n                  </Tooltip>\n                </Command>\n                <Command name={EditorCommand.Remove}>\n                  <Tooltip title=\"删除\">\n                    <i className=\"fa fa-trash-o\" />\n                  </Tooltip>\n                </Command>\n                <Command name={EditorCommand.ZoomOut}>\n                  <Tooltip title=\"放大\">\n                    <i className=\"fa fa-search-plus\" />\n                  </Tooltip>\n                </Command>\n                <Command name={EditorCommand.ZoomIn}>\n                  <Tooltip title=\"缩小\">\n                    <i className=\"fa fa-search-minus\" />\n                  </Tooltip>\n                </Command>\n              </div>\n            </Col>\n          </Row>\n          {/* 元素面板 + 画布 + 详情面板 */}\n          <Row>\n            {/* 元素面板 */}\n            <Col flex=\"160px\">\n              <ItemPanel className=\"itempanel\">\n                <Item\n                  model={{\n                    type: 'circle',\n                    size: 80,\n                    label: 'circle'\n                  }}\n                >\n                  <img\n                    alt=\"圆\"\n                    src=\"https://gw.alicdn.com/tfs/TB1IRuSnRr0gK0jSZFnXXbRRXXa-110-112.png\"\n                    width=\"90\"\n                    height=\"90\"\n                    draggable={false}\n                  />\n                </Item>\n                <Item\n                  model={{\n                    type: 'bizFlowNode',\n                    size: [100, 50],\n                    label: 'bizFlowNode'\n                  }}\n                >\n                  <img\n                    alt=\"矩形\"\n                    src=\"https://s1.ax1x.com/2020/07/07/UAtT1I.png\"\n                    width=\"90\"\n                    height=\"90\"\n                    draggable={false}\n                  />\n                </Item>\n                <Item\n                  model={{\n                    type: 'rect',\n                    size: [100, 50],\n                    label: 'rect'\n                  }}\n                >\n                  <img\n                    alt=\"矩形\"\n                    src=\"https://gw.alicdn.com/tfs/TB1reKOnUT1gK0jSZFrXXcNCXXa-178-76.png\"\n                    width=\"90\"\n                    height=\"90\"\n                    draggable={false}\n                  />\n                </Item>\n                <Item\n                  model={{\n                    type: 'ellipse',\n                    size: [100, 50],\n                    label: 'ellipse'\n                  }}\n                >\n                  <img\n                    alt=\"椭圆\"\n                    src=\"https://gw.alicdn.com/tfs/TB1AvmVnUH1gK0jSZSyXXXtlpXa-216-126.png\"\n                    width=\"90\"\n                    height=\"90\"\n                    draggable={false}\n                  />\n                </Item>\n                <Item\n                  model={{\n                    type: 'diamond',\n                    size: [80, 80],\n                    label: 'diamond'\n                  }}\n                >\n                  <img\n                    alt=\"菱形\"\n                    src=\"https://gw.alicdn.com/tfs/TB1EB9VnNz1gK0jSZSgXXavwpXa-178-184.png\"\n                    width=\"90\"\n                    height=\"90\"\n                    draggable={false}\n                  />\n                </Item>\n                <Item\n                  model={{\n                    type: 'triangle',\n                    size: [30, 30],\n                    label: 'triangle'\n                  }}\n                >\n                  <img\n                    alt=\"三角形\"\n                    src=\"https://gw.alicdn.com/tfs/TB12sC2nKH2gK0jSZJnXXaT1FXa-126-156.png\"\n                    width=\"90\"\n                    height=\"90\"\n                    draggable={false}\n                  />\n                </Item>\n              </ItemPanel>\n            </Col>\n            {/* 画布 */}\n            <Col flex=\"auto\">\n              <div style={{ position: 'relative' }}>\n                <Flow\n                  className=\"flow\"\n                  data={data}\n                  graphConfig={{\n                    defaultNode: {\n                      type: 'bizFlowNode'\n                    },\n                    defaultEdge: {\n                      type: 'bizFlowEdge'\n                    }\n                  }}\n                />\n              </div>\n            </Col>\n            {/* 详情面板 */}\n            <Col flex=\"300px\">\n              <div className=\"detailpanel\">\n                <NodePanel />\n                <EdgePanel />\n                <MultiPanel />\n                <CanvasPanel />\n              </div>\n            </Col>\n          </Row>\n          {/* 标签编辑 */}\n          <EditableLabel />\n          {/* 右键菜单 */}\n          <div className=\"contextmenu\">\n            <ContextMenu\n              type=\"canvas\"\n              renderContent={(item, position, hide) => {\n                const { x: left, y: top } = position;\n                return (\n                  <div style={{ position: 'absolute', top, left }}>\n                    <Menu mode=\"vertical\" selectable={false} onClick={hide}>\n                      <Menu.Item>\n                        <Command name={EditorCommand.Undo}>\n                          撤销\n                        </Command>\n                      </Menu.Item>\n                      <Menu.Item>\n                        <Command name={EditorCommand.Redo}>\n                          重做\n                        </Command>\n                      </Menu.Item>\n                      <Menu.Item>\n                        <Command name={EditorCommand.PasteHere}>\n                          粘贴\n                        </Command>\n                      </Menu.Item>\n                    </Menu>\n                  </div>\n                );\n              }}\n            />\n            <ContextMenu\n              type=\"node\"\n              renderContent={(item, position, hide) => {\n                const { x: left, y: top } = position;\n                return (\n                  <div style={{ position: 'absolute', top, left }}>\n                    <Menu mode=\"vertical\" selectable={false} onClick={hide}>\n                      <Menu.Item>\n                        <Command name={EditorCommand.Copy}>\n                          复制\n                        </Command>\n                      </Menu.Item>\n                      <Menu.Item>\n                        <Command name={EditorCommand.Remove}>\n                          删除\n                        </Command>\n                      </Menu.Item>\n                    </Menu>\n                  </div>\n                );\n              }}\n            />\n            <ContextMenu\n              type=\"edge\"\n              renderContent={(item, position, hide) => {\n                const { x: left, y: top } = position;\n                return (\n                  <div style={{ position: 'absolute', top, left }}>\n                    <Menu mode=\"vertical\" selectable={false} onClick={hide}>\n                      <Menu.Item>\n                        <Command name={EditorCommand.Remove}>\n                          删除\n                        </Command>\n                      </Menu.Item>\n                    </Menu>\n                  </div>\n                );\n              }}\n            />\n          </div>\n        </GGEditor>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { ConfigProvider } from 'antd';\nimport zhCN from 'antd/es/locale/zh_CN';\n\nimport App from './views/App.jsx';\n\nReactDOM.render(\n  <React.StrictMode>\n    <ConfigProvider locale={zhCN}>\n      <App />\n    </ConfigProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}